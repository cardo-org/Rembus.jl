<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Rembus.jl</title><meta name="title" content="Home · Rembus.jl"/><meta property="og:title" content="Home · Rembus.jl"/><meta property="twitter:title" content="Home · Rembus.jl"/><meta name="description" content="Documentation for Rembus.jl."/><meta property="og:description" content="Documentation for Rembus.jl."/><meta property="twitter:description" content="Documentation for Rembus.jl."/><meta property="og:url" content="https://cardo-org.github.io/Rembus.jl/"/><meta property="twitter:url" content="https://cardo-org.github.io/Rembus.jl/"/><link rel="canonical" href="https://cardo-org.github.io/Rembus.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Rembus.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Broker"><span>Broker</span></a></li><li><a class="tocitem" href="#Component"><span>Component</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li><li><a class="tocitem" href="api/">Component API</a></li><li><a class="tocitem" href="macro_api/">Macro-based API</a></li><li><a class="tocitem" href="http_api/">HTTP Rest API</a></li><li><a class="tocitem" href="brokerless/">Client-Server</a></li><li><a class="tocitem" href="fault_tolerance/">Fault-tolerance features</a></li><li><a class="tocitem" href="security/">Security</a></li><li><a class="tocitem" href="configuration/">Configuration</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/cardo-org/Rembus.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/cardo-org/Rembus.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Rembus"><a class="docs-heading-anchor" href="#Rembus">Rembus</a><a id="Rembus-1"></a><a class="docs-heading-anchor-permalink" href="#Rembus" title="Permalink"></a></h1><p>Rembus is a middleware for Pub/Sub and RPC communication styles.</p><p>There are two types of processes: Components and Brokers.</p><ul><li>A Component connect to a Broker;</li><li>A Broker dispatch messages between Components;</li><li>A Component expose RPC services and/or subscribe to Pub/Sub topics;</li><li>A Component make RPC requests and/or publish messages to Pub/Sub topics;</li></ul><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;Rembus&quot;)</code></pre><p>Rembus installs and compiles in a minute or two.</p><h2 id="Broker"><a class="docs-heading-anchor" href="#Broker">Broker</a><a id="Broker-1"></a><a class="docs-heading-anchor-permalink" href="#Broker" title="Permalink"></a></h2><p>A <code>Broker</code> is a process that routes messages between components.</p><p>A <code>Broker</code> is capable of making components that use different transport protocols talk to each other. For example a component that uses a ZeroMQ socket may talk to a component that uses the WebSocket protocol.</p><p>Starting a <code>Broker</code> is simple as:</p><pre><code class="language-julia hljs">using Rembus

caronte()</code></pre><p>A startup script could be useful and the following <code>caronte</code> script will do:</p><pre><code class="language-julia hljs">##!/bin/bash
#=
BINDIR=$( cd -- &quot;$( dirname -- &quot;${BASH_SOURCE[0]}&quot; )&quot; &amp;&gt; /dev/null &amp;&amp; pwd )
exec julia --threads auto --color=no -e &quot;include(popfirst!(ARGS))&quot; \
 --project=$BINDIR/.. --startup-file=no &quot;${BASH_SOURCE[0]}&quot; &quot;$@&quot;
=#
using Rembus

caronte()</code></pre><p><code>caronte</code> starts by default a WebSocket server listening on port 8000, for enabling <code>tcp</code> and/or <code>zmq</code> transports use the appropriate arguments:</p><pre><code class="language-text hljs">shell&gt; ./caronte
usage: caronte [-r] [-s] [-p HTTP] [-w WS] [-t TCP] [-z ZMQ] [-d] [-h]

optional arguments:
  -r, --reset      factory reset, clean up broker configuration
  -s, --secure     accept wss and tls connections
  -p, --http HTTP  accept HTTP clients on port HTTP (type: UInt16)
  -w, --ws WS      accept WebSocket clients on port WS (type: UInt16)
  -t, --tcp TCP    accept tcp clients on port TCP (type: UInt16)
  -z, --zmq ZMQ    accept zmq clients on port ZMQ (type: UInt16)
  -d, --debug      enable debug logs
  -h, --help       show this help message and exit</code></pre><p>See <a href="configuration/#Broker-environment-variables">Broker environment variables</a> for customizing the runtime setting.  </p><h2 id="Component"><a class="docs-heading-anchor" href="#Component">Component</a><a id="Component-1"></a><a class="docs-heading-anchor-permalink" href="#Component" title="Permalink"></a></h2><p>A <code>Component</code> is a process that plays one or more of the following roles:</p><ul><li>Publisher (Pub/Sub) : produce messages;</li><li>Subscriber (Pub/Sub): consume published messages;</li><li>Requestor (RPC): request a service;</li><li>Exposer (RPC): execute a service request and give back a response;</li></ul><p>There are three type of components:</p><ul><li>Anonymous</li><li>Named</li><li>Authenticated</li></ul><p>An <code>Anonymous</code> component assume a random and ephemeral identity each time it connects to the broker. Example usage for anonymous components may be:</p><ul><li>when it is not required to trace the originating source of messages;</li><li>for a <code>Subscriber</code> not interested to receive messages published when it was offline;</li><li>for preliminary prototyping;</li></ul><p>A <code>Named</code> component has a unique and persistent name that make possible to receive messages published when the component was offline.</p><p>An <code>Authenticated</code> component is a named component that own a private key or a shared secret which can prove its identity.</p><p>Only authenticated components may use Pub/Sub private topics and private RPC methods.</p><p>An URL string defines the identity and the connection parameters of a component. The <a href="macro_api/#component">Macro-based API</a> page documents the URL format.</p><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#Rembus.RembusTimeout"><code>Rembus.RembusTimeout</code></a></li><li><a href="#Rembus.RpcMethodException"><code>Rembus.RpcMethodException</code></a></li><li><a href="#Rembus.RpcMethodLoopback"><code>Rembus.RpcMethodLoopback</code></a></li><li><a href="#Rembus.RpcMethodNotFound"><code>Rembus.RpcMethodNotFound</code></a></li><li><a href="#Rembus.RpcMethodUnavailable"><code>Rembus.RpcMethodUnavailable</code></a></li><li><a href="#Rembus.authorize-Tuple{Rembus.RBHandle, AbstractString, AbstractString}"><code>Rembus.authorize</code></a></li><li><a href="#Rembus.caronte-Tuple{}"><code>Rembus.caronte</code></a></li><li><a href="#Rembus.component"><code>Rembus.component</code></a></li><li><a href="#Rembus.connect-Tuple{}"><code>Rembus.connect</code></a></li><li><a href="#Rembus.connect-Tuple{AbstractString}"><code>Rembus.connect</code></a></li><li><a href="#Rembus.expose-Tuple{Rembus.RBHandle, AbstractString, Function}"><code>Rembus.expose</code></a></li><li><a href="#Rembus.forever-Tuple{Visor.Process}"><code>Rembus.forever</code></a></li><li><a href="#Rembus.forever-Tuple{Rembus.RBHandle}"><code>Rembus.forever</code></a></li><li><a href="#Rembus.isauthenticated-Tuple{Any}"><code>Rembus.isauthenticated</code></a></li><li><a href="#Rembus.private_topic-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.private_topic</code></a></li><li><a href="#Rembus.public_topic-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.public_topic</code></a></li><li><a href="#Rembus.publish"><code>Rembus.publish</code></a></li><li><a href="#Rembus.reactive-Tuple{Rembus.RBHandle}"><code>Rembus.reactive</code></a></li><li><a href="#Rembus.register-Tuple{AbstractString, AbstractString}"><code>Rembus.register</code></a></li><li><a href="#Rembus.rpc"><code>Rembus.rpc</code></a></li><li><a href="#Rembus.serve-Tuple{Rembus.Embedded}"><code>Rembus.serve</code></a></li><li><a href="#Rembus.server"><code>Rembus.server</code></a></li><li><a href="#Rembus.shared-Tuple{Rembus.RBHandle, Any}"><code>Rembus.shared</code></a></li><li><a href="#Rembus.subscribe-Tuple{Rembus.RBConnection, AbstractString, Function}"><code>Rembus.subscribe</code></a></li><li><a href="#Rembus.unauthorize-Tuple{Rembus.RBHandle, AbstractString, AbstractString}"><code>Rembus.unauthorize</code></a></li><li><a href="#Rembus.unexpose-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.unexpose</code></a></li><li><a href="#Rembus.unreactive-Tuple{Rembus.RBHandle}"><code>Rembus.unreactive</code></a></li><li><a href="#Rembus.unregister-Tuple{Rembus.RBConnection}"><code>Rembus.unregister</code></a></li><li><a href="#Rembus.unsubscribe-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.unsubscribe</code></a></li><li><a href="#Rembus.@component-Tuple{Any}"><code>Rembus.@component</code></a></li><li><a href="#Rembus.@expose-Tuple{Expr}"><code>Rembus.@expose</code></a></li><li><a href="#Rembus.@expose-Tuple{Symbol}"><code>Rembus.@expose</code></a></li><li><a href="#Rembus.@forever-Tuple{}"><code>Rembus.@forever</code></a></li><li><a href="#Rembus.@publish"><code>Rembus.@publish</code></a></li><li><a href="#Rembus.@reactive"><code>Rembus.@reactive</code></a></li><li><a href="#Rembus.@rpc-Tuple{Any}"><code>Rembus.@rpc</code></a></li><li><a href="#Rembus.@rpc_timeout-Tuple{Any}"><code>Rembus.@rpc_timeout</code></a></li><li><a href="#Rembus.@shared-Tuple{Any}"><code>Rembus.@shared</code></a></li><li><a href="#Rembus.@subscribe"><code>Rembus.@subscribe</code></a></li><li><a href="#Rembus.@subscribe"><code>Rembus.@subscribe</code></a></li><li><a href="#Rembus.@terminate"><code>Rembus.@terminate</code></a></li><li><a href="#Rembus.@unexpose-Tuple{Symbol}"><code>Rembus.@unexpose</code></a></li><li><a href="#Rembus.@unreactive"><code>Rembus.@unreactive</code></a></li><li><a href="#Rembus.@unsubscribe-Tuple{Symbol}"><code>Rembus.@unsubscribe</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.RembusTimeout" href="#Rembus.RembusTimeout"><code>Rembus.RembusTimeout</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RembusTimeout</code></pre><p>Thrown when a response it is not received.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L420-L424">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.RpcMethodException" href="#Rembus.RpcMethodException"><code>Rembus.RpcMethodException</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RpcMethodException</code></pre><p>Thrown when a RPC method throws an exception.</p><p><strong>Fields</strong></p><ul><li><p><code>cid</code>: component name</p></li><li><p><code>topic</code>: service name</p></li><li><p><code>reason</code>: remote exception description</p></li></ul><p><strong>Exposer</strong></p><pre><code class="language-julia hljs">@expose foo(name::AbstractString) = &quot;hello &quot; * name</code></pre><p><strong>RPC client</strong></p><pre><code class="language-julia hljs">try
    @rpc foo(1)
catch e
    @error e.reason
end</code></pre><p>Output:</p><pre><code class="nohighlight hljs">┌ Error: MethodError: no method matching foo(::UInt64)
│
│ Closest candidates are:
│   foo(!Matched::AbstractString)
│    @ Main REPL[2]:1
└ @ Main REPL</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L381-L410">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.RpcMethodLoopback" href="#Rembus.RpcMethodLoopback"><code>Rembus.RpcMethodLoopback</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RpcMethodLoopback</code></pre><p>Thrown when a RPC request would invoke a locally exposed method.</p><p><strong>Fields</strong></p><ul><li><p><code>cid</code>: component name</p></li><li><p><code>topic</code>: service name</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L366-L373">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.RpcMethodNotFound" href="#Rembus.RpcMethodNotFound"><code>Rembus.RpcMethodNotFound</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>RpcMethodNotFound</code> is thrown from a rpc request when the called method is unknown.</p><p>fields:</p><ul><li><p><code>cid</code>: component name</p></li><li><p><code>topic</code>: service name</p></li></ul><p><strong>RPC Client</strong></p><pre><code class="language-julia hljs">@rpc coolservice()</code></pre><p>Output:</p><pre><code class="nohighlight hljs">ERROR: Rembus.RpcMethodNotFound(&quot;rembus&quot;, &quot;coolservice&quot;)
Stacktrace:
...</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L324-L340">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.RpcMethodUnavailable" href="#Rembus.RpcMethodUnavailable"><code>Rembus.RpcMethodUnavailable</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RpcMethodUnavailable</code></pre><p>Thrown when a RPC method is unavailable.</p><p>A method is considered unavailable when some component that exposed the method is currently disconnected from the broker.</p><p><strong>Fields</strong></p><ul><li><p><code>cid</code>: component name</p></li><li><p><code>topic</code>: service name</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L348-L358">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.authorize-Tuple{Rembus.RBHandle, AbstractString, AbstractString}" href="#Rembus.authorize-Tuple{Rembus.RBHandle, AbstractString, AbstractString}"><code>Rembus.authorize</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function authorize(
    rb::RBHandle, client::AbstractString, topic::AbstractString;
    exceptionerror=true
)</code></pre><p>Authorize the <code>client</code> component to use the private <code>topic</code>.</p><p>The component must have the admin role for granting topic accessibility.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2319-L2328">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.caronte-Tuple{}" href="#Rembus.caronte-Tuple{}"><code>Rembus.caronte</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">caronte(; wait=true, plugin=nothing, context=nothing, args=Dict())</code></pre><p>Start the broker.</p><p>Return immediately when <code>wait</code> is false, otherwise blocks until shutdown is requested.</p><p>Overwrite command line arguments if args is not empty.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/broker.jl#L1198-L1206">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.component" href="#Rembus.component"><code>Rembus.component</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">component(url)</code></pre><p>Connect rembus component defined by <code>url</code>.</p><p>The connection is supervised and network faults starts connection retries attempts until successful outcome.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2162-L2169">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.connect-Tuple{AbstractString}" href="#Rembus.connect-Tuple{AbstractString}"><code>Rembus.connect</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">connect(url::AbstractString)::RBHandle</code></pre><p>Connect to the broker.</p><p>The returned rembus handler do not auto-reconnect in case of a fault condition.</p><p>The returned <code>RBHandle</code> handle represents a connected component used for the Rembus APIs. For example:</p><pre><code class="language-julia hljs">using Rembus
rb = connect(&quot;mycomponent&quot;)
publish(rb, &quot;temperature&quot;, [&quot;room_1&quot;, 21.5])</code></pre><p>The <code>url</code> argument string is formatted as:</p><p><code>url = [&lt;protocol&gt;://][&lt;host&gt;][:&lt;port&gt;/]&lt;cid&gt;</code></p><p><code>&lt;protocol&gt;</code> is one of:</p><ul><li><code>ws</code> web socket</li><li><code>wss</code> secure web socket</li><li><code>tcp</code> tcp socket</li><li><code>tls</code> TLS over tcp socket</li><li><code>zmq</code> ZeroMQ socket</li></ul><p><code>&lt;host&gt;</code> and <code>&lt;port&gt;</code> are the hostname/ip and the port of the listening broker.</p><p><code>&lt;cid&gt;</code> is the unique name of the component.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L1869-L1900">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.connect-Tuple{}" href="#Rembus.connect-Tuple{}"><code>Rembus.connect</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">connect()</code></pre><p>Connect anonymously to the endpoint declared with <code>REMBUS_BASE_URL</code> env variable.</p><p><code>REMBUS_BASE_URL</code> default to <code>ws://127.0.0.1:8000</code></p><p>A component is considered anonymous when a different and random UUID is used as component identifier each time the application connect to the broker.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L1854-L1863">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.expose-Tuple{Rembus.RBHandle, AbstractString, Function}" href="#Rembus.expose-Tuple{Rembus.RBHandle, AbstractString, Function}"><code>Rembus.expose</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">expose(rb::RBHandle, fn::Function; exceptionerror=true)
expose(rb::RBHandle, topic::AbstractString, fn::Function; exceptionerror=true)</code></pre><p>Expose the methods of function <code>fn</code> to be executed by rpc clients using <code>topic</code> as RPC method name.</p><p>If the <code>topic</code> argument is omitted the function name equals to the RPC method name.</p><p><code>fn</code> returns the RPC response.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2250-L2260">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.forever-Tuple{Rembus.RBHandle}" href="#Rembus.forever-Tuple{Rembus.RBHandle}"><code>Rembus.forever</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">forever(rb::RBHandle)

Start the event loop awaiting to execute exposed and subscribed methods.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2617-L2621">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.forever-Tuple{Visor.Process}" href="#Rembus.forever-Tuple{Visor.Process}"><code>Rembus.forever</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">forever(rb::Visor.Process)

Start the event loop awaiting to execute exposed and subscribed methods.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2605-L2609">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.isauthenticated-Tuple{Any}" href="#Rembus.isauthenticated-Tuple{Any}"><code>Rembus.isauthenticated</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isauthenticated(session)</code></pre><p>Return true if the connected component is authenticated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/broker.jl#L2025-L2029">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.private_topic-Tuple{Rembus.RBHandle, AbstractString}" href="#Rembus.private_topic-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.private_topic</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">private_topic(rb::RBHandle, topic::AbstractString; exceptionerror=true)</code></pre><p>Set the <code>topic</code> to private.</p><p>The component must have the admin role for changing the privateness level.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2291-L2297">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.public_topic-Tuple{Rembus.RBHandle, AbstractString}" href="#Rembus.public_topic-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.public_topic</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">public_topic(rb::RBHandle, topic::AbstractString; exceptionerror=true)</code></pre><p>Set the <code>topic</code> to public.</p><p>The component must have the admin role for changing the privateness level.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2305-L2311">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.publish" href="#Rembus.publish"><code>Rembus.publish</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">publish(rb::RBHandle, topic::AbstractString, data=[]; qos=QOS0)</code></pre><p>Publish <code>data</code> values on <code>topic</code>.</p><p><code>data</code> may be a value or a vector of values. Each value map to the arguments of the subscribed method.</p><p>For example if the subscriber is a method that expects two arguments:</p><pre><code class="nohighlight hljs">mytopic(x,y) = @info &quot;x=$x, y=$y&quot;</code></pre><p>The published message needs an array of two elements:</p><pre><code class="nohighlight hljs">publish(rb, &quot;mytopic&quot;, [1, 2])</code></pre><p>When a subscribed method expect one argument instead of passing an array of one element it may be better to pass the value:</p><pre><code class="nohighlight hljs">mytopic(x) = @info &quot;x=$x&quot;

publish(rb, &quot;mytopic&quot;, 1)</code></pre><p>If the subscribed method has no arguments invoke <code>publish</code> as:</p><pre><code class="nohighlight hljs">mytopic() = @info &quot;mytopic invoked&quot;

publish(rb, &quot;mytopic&quot;)</code></pre><p><code>data</code> array may contains any type, but if the components are implemented in different languages then data has to be a DataFrame or a primitive type that is <a href="https://www.rfc-editor.org/rfc/rfc8949.html">CBOR</a> encodable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2382-L2422">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.reactive-Tuple{Rembus.RBHandle}" href="#Rembus.reactive-Tuple{Rembus.RBHandle}"><code>Rembus.reactive</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reactive(
    rb::RBHandle;
    msg_from::Union{Real,Period,Dates.CompoundPeriod}=Day(1),
    exceptionerror=true
)</code></pre><p>Start the delivery of published messages for which there was declared an interest with <a href="#Rembus.subscribe-Tuple{Rembus.RBConnection, AbstractString, Function}"><code>subscribe</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2059-L2068">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.register-Tuple{AbstractString, AbstractString}" href="#Rembus.register-Tuple{AbstractString, AbstractString}"><code>Rembus.register</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">register(
    cid::AbstractString,
    pin::AbstractString;
    tenant=Union{Nothing, AbstractString} = nothing,
    scheme::UInt8
)</code></pre><p>Register the component with name <code>cid</code>.</p><p>To register a component a single <code>pin</code> or a set of tenants must be configured in the <code>tenants.json</code> file.</p><p>The <code>pin</code> shared secret is a 8 hex digits string (for example &quot;deedbeef&quot;).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/register.jl#L37-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.rpc" href="#Rembus.rpc"><code>Rembus.rpc</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rpc(rb::RBHandle,
    topic::AbstractString,
    data=nothing;
    exceptionerror=true,
    timeout=request_timeout())</code></pre><p>Call the remote <code>topic</code> method with arguments extracted from <code>data</code>.</p><p><strong>Exposer</strong></p><pre><code class="language-julia hljs">using Rembus
using Statistics

@expose service_noargs() = &quot;success&quot;

@expose service_name(name) = &quot;hello &quot; * name

@expose service_dictionary(d) = mean(values(d))

@expose function service_multiple_args(name, score, flags)
    isa(name, String) &amp;&amp; isa(score, Float64) &amp;&amp; isa(flags, Vector)
end</code></pre><p><strong>RPC client</strong></p><pre><code class="language-julia hljs">using Rembus

rb = connect()

rcp(rb, &quot;service_noargs&quot;)

rpc(rb, &quot;service_name&quot;, &quot;hello world&quot;)

rpc(rb, &quot;service_dictionary&quot;, Dict(&quot;r1&quot;=&gt;13.3, &quot;r2&quot;=&gt;3.0))

rpc(rb, &quot;service_multiple_args&quot;, [&quot;name&quot;, 1.0, [&quot;red&quot;=&gt;1,&quot;blue&quot;=&gt;2,&quot;yellow&quot;=&gt;3]])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2428-L2469">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.serve-Tuple{Rembus.Embedded}" href="#Rembus.serve-Tuple{Rembus.Embedded}"><code>Rembus.serve</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">serve(server::Embedded; wait=true, secure=false)</code></pre><p>Start an embedded server and accept connections.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/broker.jl#L1286-L1290">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.server" href="#Rembus.server"><code>Rembus.server</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">server(ctx=nothing)</code></pre><p>Initialize a server for brokerless rpc and one way pub/sub.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/broker.jl#L73-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.shared-Tuple{Rembus.RBHandle, Any}" href="#Rembus.shared-Tuple{Rembus.RBHandle, Any}"><code>Rembus.shared</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">shared(rb::RBHandle, ctx)</code></pre><p>Bind a <code>ctx</code> context object to the <code>rb</code> component.</p><p>When a <code>ctx</code> context object is bound then it will be the first argument of subscribed and exposed methods.</p><p>See <a href="#Rembus.@shared-Tuple{Any}"><code>@shared</code></a> for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L1032-L1041">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.subscribe-Tuple{Rembus.RBConnection, AbstractString, Function}" href="#Rembus.subscribe-Tuple{Rembus.RBConnection, AbstractString, Function}"><code>Rembus.subscribe</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subscribe(rb::RBHandle, fn::Function; msg_from=Now(), exceptionerror=true)
subscribe(
    rb::RBHandle, topic::AbstractString, fn::Function; msg_from=Now(),
    exceptionerror=true
)</code></pre><p>Declare interest for messages published on <code>topic</code> logical channel.</p><p>The function <code>fn</code> is called when a message is received on <code>topic</code> and <a href="#Rembus.reactive-Tuple{Rembus.RBHandle}"><code>reactive</code></a> put the <code>rb</code> component in reactive mode.</p><p>If the <code>topic</code> argument is omitted the function name must be equal to the topic name.</p><p>If <code>msg_from</code> is <code>LastReceived()</code> then <code>rb</code> component will receive messages published when it was offline.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2109-L2125">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.unauthorize-Tuple{Rembus.RBHandle, AbstractString, AbstractString}" href="#Rembus.unauthorize-Tuple{Rembus.RBHandle, AbstractString, AbstractString}"><code>Rembus.unauthorize</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function unauthorize(
    rb::RBHandle, client::AbstractString, topic::AbstractString;
    exceptionerror=true
)</code></pre><p>Revoke authorization to the <code>client</code> component for use of the private <code>topic</code>.</p><p>The component must have the admin role for revoking topic accessibility.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2339-L2348">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.unexpose-Tuple{Rembus.RBHandle, AbstractString}" href="#Rembus.unexpose-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.unexpose</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">unexpose(rb::RBHandle, fn::Function; exceptionerror=true)
unexpose(rb::RBHandle, topic::AbstractString; exceptionerror=true)</code></pre><p>Stop servicing RPC requests targeting <code>topic</code> or <code>fn</code> methods.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2273-L2278">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.unreactive-Tuple{Rembus.RBHandle}" href="#Rembus.unreactive-Tuple{Rembus.RBHandle}"><code>Rembus.unreactive</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">unreactive(rb::RBHandle, timeout=5; exceptionerror=true)</code></pre><p>Stop the delivery of published message.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2043-L2047">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.unregister-Tuple{Rembus.RBConnection}" href="#Rembus.unregister-Tuple{Rembus.RBConnection}"><code>Rembus.unregister</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">unregister(rb)</code></pre><p>Unregister the connected component.</p><p>Only a connected and authenticated component may execute the unregister command.</p><pre><code class="nohighlight hljs">using Rembus

rb = connect(&quot;authenticated_component&quot;)
Rembus.unregister(rb)
close(rb)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/register.jl#L102-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.unsubscribe-Tuple{Rembus.RBHandle, AbstractString}" href="#Rembus.unsubscribe-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.unsubscribe</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">unsubscribe(rb::RBHandle, topic::AbstractString; exceptionerror=true)
unsubscribe(rb::RBHandle, fn::Function; exceptionerror=true)</code></pre><p>No more messages published on a <code>topic</code> logical channel or a topic name equals to the name of the subscribed function will be delivered to <code>rb</code> component.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2230-L2236">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@component-Tuple{Any}" href="#Rembus.@component-Tuple{Any}"><code>Rembus.@component</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@component &quot;url&quot;</code></pre><p>Set the name of the component and the protocol for connecting to the broker.</p><p><code>url</code> may be:</p><ul><li>&quot;myname&quot;: use <span>$</span>REMBUS_BASE_URL for connection parameters</li><li>&quot;tcp://host:port/myname&quot;: tcp connection</li><li>&quot;ws://host:port/myname&quot;: web socket connection</li><li>&quot;zmq://host:port/myname&quot;: ZeroMQ connection</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L493-L504">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@expose-Tuple{Expr}" href="#Rembus.@expose-Tuple{Expr}"><code>Rembus.@expose</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@expose function fn(arg1,...)
    ...
end</code></pre><p>Expose the function expression.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L792-L798">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@expose-Tuple{Symbol}" href="#Rembus.@expose-Tuple{Symbol}"><code>Rembus.@expose</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@expose fn</code></pre><p>Expose all the methods of the function <code>fn</code>.</p><p><strong>Example</strong></p><p>Expose the function <code>mycalc</code> that implements a service that may accept two numbers or a string and number:</p><pre><code class="language-julia hljs">mycalc(x::Number, y::Number) = x+y
mycalc(x::String, y::Number) = length(x)*y

@expose mycalc</code></pre><p>Call <code>mycal</code> service using the correct types of arguments:</p><pre><code class="language-julia hljs"># ok
julia&gt; response = @rpc mycalc(1,2)
0x0000000000000003

# ok
julia&gt; response = @rpc mycalc(&quot;hello&quot;,2.0)
10.0</code></pre><p>If the RPC client call <code>mycalc</code> with the argument&#39;s type that do not respect the signatures of the exposed service then it throws <a href="#Rembus.RpcMethodException"><code>RpcMethodException</code></a></p><pre><code class="language-julia hljs">julia&gt; response = @rpc mycalc(&quot;hello&quot;,&quot;world&quot;)
ERROR: RpcMethodException(&quot;rembus&quot;, &quot;mycalc&quot;, &quot;MethodError: no method matching mycalc(::String, ::String) ...</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L746-L782">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@forever-Tuple{}" href="#Rembus.@forever-Tuple{}"><code>Rembus.@forever</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@forever</code></pre><p>Start the event loop awaiting to execute exposed and subscribed methods.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L2627-L2631">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@publish" href="#Rembus.@publish"><code>Rembus.@publish</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@publish topic(arg1,arg2,...)</code></pre><p>Publish a message to <code>topic</code> logic channel.</p><p>The function <code>topic(arg1,arg2,...)</code> will be called on each connected component subscribed to <code>topic</code>.</p><p><strong>Publisher</strong></p><pre><code class="language-julia hljs">@publish foo(&quot;gfr&quot;, 54.2)</code></pre><p><strong>Subscriber</strong></p><pre><code class="language-julia hljs">function foo(name, value)
    println(&quot;do something with $name=$value&quot;)
end

@subscribe foo
@reactive

supervise()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L612-L636">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@reactive" href="#Rembus.@reactive"><code>Rembus.@reactive</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@reactive</code></pre><p>The subscribed methods start to handle published messages.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L943-L947">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@rpc-Tuple{Any}" href="#Rembus.@rpc-Tuple{Any}"><code>Rembus.@rpc</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@rpc service(arg1,...)</code></pre><p>Call the remote <code>service</code> method and return its outcome.</p><p>The outcome may be the a return value or a <a href="#Rembus.RpcMethodException"><code>RpcMethodException</code></a> if the remote throws an exception.</p><p>The <code>service</code> method must match the signature of an exposed remote <code>service</code> method.</p><p>Components may subscribe to <code>service</code> for receiving the <code>service</code> request.</p><p><strong>Exposer</strong></p><pre><code class="language-julia hljs">function mymethod(x, y)
    return evaluate(x,y)
end

@expose mymethod
supervise()</code></pre><p><strong>RPC client</strong></p><pre><code class="language-julia hljs">response = @rpc mymethod(x,y)</code></pre><p><strong>Subscriber</strong></p><pre><code class="language-julia hljs">function service(x, y)
    ...
end

@subscribe service
@reactive

supervise()
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L666-L705">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@rpc_timeout-Tuple{Any}" href="#Rembus.@rpc_timeout-Tuple{Any}"><code>Rembus.@rpc_timeout</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@rpc_timeout value</code></pre><p>Set the rpc request timeout in seconds.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L527-L531">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@shared-Tuple{Any}" href="#Rembus.@shared-Tuple{Any}"><code>Rembus.@shared</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs"> @shared container</code></pre><p>Bind a <code>container</code> object that is passed as the first argument of the subscribed component functions.</p><p>The <code>container</code> is useful for mantaining a state.</p><pre><code class="language-julia hljs">using Rembus

# keep the number of processed messages
mutable struct Context
    msgcount::UInt
end

function topic(context::Context, arg1, arg2)
    context.msgcount += 1
    some_logic(arg1, arg2)
end

ctx = Context(0)
@subscribe topic
@shared ctx</code></pre><p>Using <code>@shared</code> to set a <code>container</code> object means that if some component <code>publish topic(arg1,arg2)</code> then the method <code>foo(container,arg2,arg2)</code> will be called.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L555-L584">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@subscribe" href="#Rembus.@subscribe"><code>Rembus.@subscribe</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@subscribe topic [mode]</code></pre><p>Setup a subscription to <code>topic</code> logic channel to handle messages from <a href="#Rembus.@publish"><code>@publish</code></a> or <a href="#Rembus.@rpc-Tuple{Any}"><code>@rpc</code></a>.</p><p><code>mode</code> values`:</p><ul><li><code>from_now</code> (default): receive messages published from now.</li><li><code>before_now</code>: receive messages published when the component was offline.</li></ul><p>Messages starts to be delivered to <code>topic</code> when reactivity is enabled with <code>@reactive</code> macro.</p><p><strong>Subscriber</strong></p><pre><code class="language-julia hljs">function foo(arg1, arg2)
    ...
end

@subscribe foo
@reactive

supervise()</code></pre><p><strong>Publisher</strong></p><pre><code class="language-julia hljs">@publish foo(&quot;gfr&quot;, 54.2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L825-L854">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@subscribe" href="#Rembus.@subscribe"><code>Rembus.@subscribe</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@subscribe function fn(args...)
    ...
end [mode]</code></pre><p>Subscribe the function expression.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L862-L868">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@terminate" href="#Rembus.@terminate"><code>Rembus.@terminate</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@terminate</code></pre><p>Close the connection and terminate the component.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L514-L518">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@unexpose-Tuple{Symbol}" href="#Rembus.@unexpose-Tuple{Symbol}"><code>Rembus.@unexpose</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@unexpose fn</code></pre><p>The methods of <code>fn</code> function is no more available to rpc clients.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L886-L890">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@unreactive" href="#Rembus.@unreactive"><code>Rembus.@unreactive</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@unreactive</code></pre><p>The subscribed methods stop to handle published messages.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L956-L960">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Rembus.@unsubscribe-Tuple{Symbol}" href="#Rembus.@unsubscribe-Tuple{Symbol}"><code>Rembus.@unsubscribe</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@unsubscribe mytopic</code></pre><p>The methods of <code>mytopic</code> function stop to handle messages published to topic <code>mytopic</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/52ef404defdd9204024a9460e0c7aa45016076b2/src/Rembus.jl#L909-L914">source</a></section></article><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="api/">Component API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Monday 7 October 2024 17:38">Monday 7 October 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
