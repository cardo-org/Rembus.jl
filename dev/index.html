<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Rembus.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://cardo-org.github.io/Rembus.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Rembus.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Broker"><span>Broker</span></a></li><li><a class="tocitem" href="#Component"><span>Component</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li><li><a class="tocitem" href="configuration/">Configuration</a></li><li><a class="tocitem" href="supervised_api/">Supervised API</a></li><li><a class="tocitem" href="unsupervised_api/">Unsupervised API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/cardo-org/Rembus.jl/blob/main/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Rembus"><a class="docs-heading-anchor" href="#Rembus">Rembus</a><a id="Rembus-1"></a><a class="docs-heading-anchor-permalink" href="#Rembus" title="Permalink"></a></h1><h2 id="Broker"><a class="docs-heading-anchor" href="#Broker">Broker</a><a id="Broker-1"></a><a class="docs-heading-anchor-permalink" href="#Broker" title="Permalink"></a></h2><p>Starting the broker is simple as:</p><pre><code class="language-sh hljs">julia -e &quot;using Rembus; caronte()&quot;</code></pre><p>A startup script could be useful and the following <code>caronte</code> script suffice:</p><pre><code class="language-julia hljs">##!/bin/bash
#=
BINDIR=$( cd -- &quot;$( dirname -- &quot;${BASH_SOURCE[0]}&quot; )&quot; &amp;&gt; /dev/null &amp;&amp; pwd )
exec julia --threads auto --color=no -e &quot;include(popfirst!(ARGS))&quot; \
 --project=$BINDIR/.. --startup-file=no &quot;${BASH_SOURCE[0]}&quot; &quot;$@&quot;
=#
using Rembus

Rembus.caronte()</code></pre><p>See <a href="configuration/#Broker-environment-variables">Broker environment variables</a> for customizing the runtime setting.  </p><h2 id="Component"><a class="docs-heading-anchor" href="#Component">Component</a><a id="Component-1"></a><a class="docs-heading-anchor-permalink" href="#Component" title="Permalink"></a></h2><p>A <code>Component</code> is a broker client who uses the Rembus protocol for RPC commands and for streaming data in a Pub/Sub fashion.</p><p>The macro <code>@component</code> declares a component whom identity and the connection parameters are defined with an URL:</p><pre><code class="language-julia hljs">component_url = &quot;[&lt;protocol&gt;://][&lt;host&gt;][:&lt;port&gt;/]&lt;cid&gt;&quot;

@component component_url</code></pre><p><code>&lt;protocol&gt;</code> is one of:</p><ul><li><code>ws</code> web socket</li><li><code>wss</code> secure web socket</li><li><code>tcp</code> tcp socket</li><li><code>tls</code> TLS over tcp socket</li><li><code>zmq</code> ZeroMQ socket</li></ul><p><code>&lt;host&gt;</code> and <code>&lt;port&gt;</code> are the hostname/ip and the port of the broker listening endpoint.</p><p><code>&lt;cid&gt;</code> is the unique name of the component.</p><p>For example:</p><pre><code class="language-julia hljs">@component &quot;ws://caronte.org:8000/myclient&quot;</code></pre><p>defines the component <code>myclient</code> that communicates with the broker hosted on <code>caronte.org</code>, listening on port <code>8000</code> and accepting web socket connections.</p><h3 id="Default-component-URL-parameters"><a class="docs-heading-anchor" href="#Default-component-URL-parameters">Default component URL parameters</a><a id="Default-component-URL-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Default-component-URL-parameters" title="Permalink"></a></h3><p>The string that define a component may be simplified by using the enviroment variable <code>REMBUS_BASE_URL</code> that set the connection default parameters:</p><p>For example:</p><pre><code class="language-sh hljs">REMBUS_BASE_URL=ws://localhost:8000</code></pre><p>define the default protocol, host and port, so that the above <code>component_url</code> may be simplified as:</p><pre><code class="language-julia hljs">@component &quot;myclient&quot;</code></pre><p>Uses the web socket protocol to connect to <code>localhost</code> on port <code>8000</code>.</p><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#Rembus.RembusDisconnect"><code>Rembus.RembusDisconnect</code></a></li><li><a href="#Rembus.RembusTimeout"><code>Rembus.RembusTimeout</code></a></li><li><a href="#Rembus.RpcMethodException"><code>Rembus.RpcMethodException</code></a></li><li><a href="#Rembus.RpcMethodLoopback"><code>Rembus.RpcMethodLoopback</code></a></li><li><a href="#Rembus.RpcMethodNotFound"><code>Rembus.RpcMethodNotFound</code></a></li><li><a href="#Rembus.RpcMethodUnavailable"><code>Rembus.RpcMethodUnavailable</code></a></li><li><a href="#Rembus.authorize-Tuple{Any, Any, Any}"><code>Rembus.authorize</code></a></li><li><a href="#Rembus.broker_parse-Tuple{Rembus.Router, Rembus.ZMQPacket}"><code>Rembus.broker_parse</code></a></li><li><a href="#Rembus.broker_parse-Tuple{Any}"><code>Rembus.broker_parse</code></a></li><li><a href="#Rembus.caronte-Tuple{}"><code>Rembus.caronte</code></a></li><li><a href="#Rembus.connect-Tuple{}"><code>Rembus.connect</code></a></li><li><a href="#Rembus.connect-Tuple{AbstractString}"><code>Rembus.connect</code></a></li><li><a href="#Rembus.connected_socket_load-Tuple{Any}"><code>Rembus.connected_socket_load</code></a></li><li><a href="#Rembus.create_private_key-Tuple{AbstractString}"><code>Rembus.create_private_key</code></a></li><li><a href="#Rembus.expose-Tuple{Rembus.RBHandle, AbstractString, Function}"><code>Rembus.expose</code></a></li><li><a href="#Rembus.load_owners-Tuple{}"><code>Rembus.load_owners</code></a></li><li><a href="#Rembus.load_token_app-Tuple{}"><code>Rembus.load_token_app</code></a></li><li><a href="#Rembus.load_twins-Tuple{Any}"><code>Rembus.load_twins</code></a></li><li><a href="#Rembus.private_topic-Tuple{Any, Any, Any}"><code>Rembus.private_topic</code></a></li><li><a href="#Rembus.public_topic-Tuple{Any, Any, Any}"><code>Rembus.public_topic</code></a></li><li><a href="#Rembus.publish"><code>Rembus.publish</code></a></li><li><a href="#Rembus.reactive-Tuple{Rembus.RBHandle}"><code>Rembus.reactive</code></a></li><li><a href="#Rembus.register-Tuple{AbstractString, AbstractString, AbstractString}"><code>Rembus.register</code></a></li><li><a href="#Rembus.rpc"><code>Rembus.rpc</code></a></li><li><a href="#Rembus.save_configuration-Tuple{Rembus.Router}"><code>Rembus.save_configuration</code></a></li><li><a href="#Rembus.save_owners-Tuple{Any}"><code>Rembus.save_owners</code></a></li><li><a href="#Rembus.save_token_app-Tuple{Any}"><code>Rembus.save_token_app</code></a></li><li><a href="#Rembus.save_twins-Tuple{Any}"><code>Rembus.save_twins</code></a></li><li><a href="#Rembus.set_broker_context-Tuple{Any}"><code>Rembus.set_broker_context</code></a></li><li><a href="#Rembus.set_broker_plugin-Tuple{Module}"><code>Rembus.set_broker_plugin</code></a></li><li><a href="#Rembus.shared-Tuple{Rembus.RBHandle, Any}"><code>Rembus.shared</code></a></li><li><a href="#Rembus.subscribe"><code>Rembus.subscribe</code></a></li><li><a href="#Rembus.unauthorize-Tuple{Any, Any, Any}"><code>Rembus.unauthorize</code></a></li><li><a href="#Rembus.unexpose-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.unexpose</code></a></li><li><a href="#Rembus.unreactive-Tuple{Rembus.RBHandle}"><code>Rembus.unreactive</code></a></li><li><a href="#Rembus.unregister-Tuple{Any, AbstractString}"><code>Rembus.unregister</code></a></li><li><a href="#Rembus.unsubscribe-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.unsubscribe</code></a></li><li><a href="#Rembus.zmq_load-Tuple{ZMQ.Socket}"><code>Rembus.zmq_load</code></a></li><li><a href="#Rembus.zmq_message-Tuple{Rembus.Router}"><code>Rembus.zmq_message</code></a></li><li><a href="#Rembus.zmq_message-Tuple{ZMQ.Socket}"><code>Rembus.zmq_message</code></a></li><li><a href="#Rembus.@component-Tuple{Any}"><code>Rembus.@component</code></a></li><li><a href="#Rembus.@disable_ack"><code>Rembus.@disable_ack</code></a></li><li><a href="#Rembus.@enable_ack"><code>Rembus.@enable_ack</code></a></li><li><a href="#Rembus.@expose-Tuple{Symbol}"><code>Rembus.@expose</code></a></li><li><a href="#Rembus.@expose-Tuple{Expr}"><code>Rembus.@expose</code></a></li><li><a href="#Rembus.@publish-Tuple{Any}"><code>Rembus.@publish</code></a></li><li><a href="#Rembus.@reactive"><code>Rembus.@reactive</code></a></li><li><a href="#Rembus.@rpc-Tuple{Any}"><code>Rembus.@rpc</code></a></li><li><a href="#Rembus.@rpc_timeout-Tuple{Any}"><code>Rembus.@rpc_timeout</code></a></li><li><a href="#Rembus.@shared-Tuple{Any}"><code>Rembus.@shared</code></a></li><li><a href="#Rembus.@subscribe"><code>Rembus.@subscribe</code></a></li><li><a href="#Rembus.@subscribe"><code>Rembus.@subscribe</code></a></li><li><a href="#Rembus.@terminate"><code>Rembus.@terminate</code></a></li><li><a href="#Rembus.@unexpose-Tuple{Symbol}"><code>Rembus.@unexpose</code></a></li><li><a href="#Rembus.@unreactive"><code>Rembus.@unreactive</code></a></li><li><a href="#Rembus.@unsubscribe-Tuple{Symbol}"><code>Rembus.@unsubscribe</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="Rembus.RembusDisconnect" href="#Rembus.RembusDisconnect"><code>Rembus.RembusDisconnect</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RembusDisconnect</code></pre><p>Thrown when a rembus connection get unexpectedly down.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L219-L223">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.RembusTimeout" href="#Rembus.RembusTimeout"><code>Rembus.RembusTimeout</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RembusTimeout</code></pre><p>Thrown when a response it is not received.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L209-L213">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.RpcMethodException" href="#Rembus.RpcMethodException"><code>Rembus.RpcMethodException</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RpcMethodException</code></pre><p>Thrown when a RPC method throws an exception.</p><p><strong>Fields</strong></p><ul><li><p><code>cid</code>: component name</p></li><li><p><code>topic</code>: service name</p></li><li><p><code>reason</code>: remote exception description</p></li></ul><p><strong>Exposer</strong></p><pre><code class="language-julia hljs">@expose foo(name::AbstractString) = &quot;hello &quot; * name</code></pre><p><strong>RPC client</strong></p><pre><code class="language-julia hljs">try
    @rpc foo(1)
catch e
    @error e.reason
end</code></pre><p>Output:</p><pre><code class="nohighlight hljs">┌ Error: MethodError: no method matching foo(::UInt64)
│
│ Closest candidates are:
│   foo(!Matched::AbstractString)
│    @ Main REPL[2]:1
└ @ Main REPL</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L170-L199">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.RpcMethodLoopback" href="#Rembus.RpcMethodLoopback"><code>Rembus.RpcMethodLoopback</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RpcMethodLoopback</code></pre><p>Thrown when a RPC request to a locally exposed method.</p><p><strong>Fields</strong></p><ul><li><p><code>cid</code>: component name</p></li><li><p><code>topic</code>: service name</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L155-L162">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.RpcMethodNotFound" href="#Rembus.RpcMethodNotFound"><code>Rembus.RpcMethodNotFound</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>RpcMethodNotFound</code> is thrown from a rpc request when a remote method is unknown.</p><p>fields:</p><ul><li><p><code>cid</code>: component name</p></li><li><p><code>topic</code>: service name</p></li></ul><p><strong>RPC Client</strong></p><pre><code class="language-julia hljs">@rpc coolservice()</code></pre><p>Output:</p><pre><code class="nohighlight hljs">ERROR: Rembus.RpcMethodNotFound(&quot;rembus&quot;, &quot;coolservice&quot;)
Stacktrace:
...</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L113-L129">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.RpcMethodUnavailable" href="#Rembus.RpcMethodUnavailable"><code>Rembus.RpcMethodUnavailable</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RpcMethodUnavailable</code></pre><p>Thrown when a RPC method is unavailable.</p><p>A method is considered unavailable when some component that expose the method is currently disconnected from the broker.</p><p><strong>Fields</strong></p><ul><li><p><code>cid</code>: component name</p></li><li><p><code>topic</code>: service name</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L137-L147">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.authorize-Tuple{Any, Any, Any}" href="#Rembus.authorize-Tuple{Any, Any, Any}"><code>Rembus.authorize</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">authorize(router, twin, msg)</code></pre><p>Administration command to authorize a component to publish/subscribe to a private topic.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/admin.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.broker_parse-Tuple{Any}" href="#Rembus.broker_parse-Tuple{Any}"><code>Rembus.broker_parse</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">broker_parse(pkt)</code></pre><p>Get a Rembus message from a CBOR encoded packet.</p><p>The decoding is performed at the broker side.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/transport.jl#L88-L94">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.broker_parse-Tuple{Rembus.Router, Rembus.ZMQPacket}" href="#Rembus.broker_parse-Tuple{Rembus.Router, Rembus.ZMQPacket}"><code>Rembus.broker_parse</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">broker_parse(router::Router, pkt::ZMQPacket)</code></pre><p>The Broker parser of ZeroMQ messages.</p><p><code>pkt</code> is the zeromq message decoded as <code>[identity, header, data]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/transport.jl#L289-L295">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.caronte-Tuple{}" href="#Rembus.caronte-Tuple{}"><code>Rembus.caronte</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">caronte(; wait=true, exit_when_done=true)</code></pre><p>Start the broker.</p><p>Return immediately when <code>wait</code> is false, otherwise blocks until shut down.</p><p>Return instead of exiting if <code>exit_when_done</code> is false.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/broker.jl#L1053-L1061">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.connect-Tuple{AbstractString}" href="#Rembus.connect-Tuple{AbstractString}"><code>Rembus.connect</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">connect(url::AbstractString)::RBHandle</code></pre><p>Connect to the broker.</p><p>The returned rembus handler do not auto-reconnect in case of a fault condition.</p><p>The returned <code>RBHandle</code> handle represents a connected component used for the Rembus APIs. For example:</p><pre><code class="language-julia hljs">using Rembus
rb = connect(&quot;mycomponent&quot;)
publish(rb, &quot;temperature&quot;, [&quot;room_1&quot;, 21.5])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L1582-L1597">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.connect-Tuple{}" href="#Rembus.connect-Tuple{}"><code>Rembus.connect</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">connect()</code></pre><p>Connect anonymously to the broker.</p><p>A random v4 UUID is used as component identifier.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L1570-L1576">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.connected_socket_load-Tuple{Any}" href="#Rembus.connected_socket_load-Tuple{Any}"><code>Rembus.connected_socket_load</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">connected_socket_load(pkt)</code></pre><p>Get a Rembus message from a CBOR encoded packet.</p><p>The decoding is performed at the client side.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/transport.jl#L56-L62">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.create_private_key-Tuple{AbstractString}" href="#Rembus.create_private_key-Tuple{AbstractString}"><code>Rembus.create_private_key</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">create_private_key(cid::AbstractString)</code></pre><p>Create a private key for <code>cid</code> component and return its public key.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/register.jl#L8-L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.expose-Tuple{Rembus.RBHandle, AbstractString, Function}" href="#Rembus.expose-Tuple{Rembus.RBHandle, AbstractString, Function}"><code>Rembus.expose</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">expose(rb::RBHandle, fn::Function; exceptionerror=true)
expose(rb::RBHandle, topic::AbstractString, fn::Function; exceptionerror=true)</code></pre><p>The methods of function <code>fn</code> are to be executed when a RPC <code>topic</code> request is received.</p><p>If the <code>topic</code> argument is omitted the function name must be equal to the RPC topic name.</p><p>The returned value is the RPC response returned to the RPC client.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L1811-L1820">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.load_owners-Tuple{}" href="#Rembus.load_owners-Tuple{}"><code>Rembus.load_owners</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load_owners()</code></pre><p>Return the owners dataframe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/store.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.load_token_app-Tuple{}" href="#Rembus.load_token_app-Tuple{}"><code>Rembus.load_token_app</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load_token_app()</code></pre><p>Return the token_app dataframe</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/store.jl#L62-L66">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.load_twins-Tuple{Any}" href="#Rembus.load_twins-Tuple{Any}"><code>Rembus.load_twins</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load_twins(router)</code></pre><p>Instantiates twins that have one or more interests.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/store.jl#L213-L217">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.private_topic-Tuple{Any, Any, Any}" href="#Rembus.private_topic-Tuple{Any, Any, Any}"><code>Rembus.private_topic</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">private_topic(router, twin, msg)</code></pre><p>Administration command to declare a private topic.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/admin.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.public_topic-Tuple{Any, Any, Any}" href="#Rembus.public_topic-Tuple{Any, Any, Any}"><code>Rembus.public_topic</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">public_topic(router, twin, msg)</code></pre><p>Administration command to reset a topic to public.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/admin.jl#L20-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.publish" href="#Rembus.publish"><code>Rembus.publish</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">publish(rb::RBHandle, topic::AbstractString, data=[])</code></pre><p>Publish <code>data</code> values on topic <code>topic</code>.</p><p><code>data</code> may be any type of data, but if the components are implemented in different languages then data has to be a DataFrame or a <a href="https://www.rfc-editor.org/rfc/rfc8949.html">CBOR</a> basic data type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L1904-L1912">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.reactive-Tuple{Rembus.RBHandle}" href="#Rembus.reactive-Tuple{Rembus.RBHandle}"><code>Rembus.reactive</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reactive(rb::RBHandle, timeout=5; exceptionerror=true)</code></pre><p>Start the delivery of published messages for which there was declared an interest with <a href="#Rembus.subscribe"><code>subscribe</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L1741-L1746">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.register-Tuple{AbstractString, AbstractString, AbstractString}" href="#Rembus.register-Tuple{AbstractString, AbstractString, AbstractString}"><code>Rembus.register</code></a> — <span class="docstring-category">Method</span></header><section><div><p>register(cid::AbstractString)</p><p>Register the client identified by <code>cid</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/register.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.rpc" href="#Rembus.rpc"><code>Rembus.rpc</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">rpc(rb::RBHandle,
    topic::AbstractString,
    data=nothing;
    exceptionerror=true,
    timeout=request_timeout())</code></pre><p>Call the remote <code>topic</code> method with arguments extracted from <code>data</code>.</p><p><strong>Exposer</strong></p><pre><code class="language-julia hljs">using Rembus
using Statistics

@expose service_noargs() = &quot;success&quot;

@expose service_name(name) = &quot;hello &quot; * name

@expose service_dictionary(d) = mean(values(d))

@expose function service_multiple_args(name, score, flags)
    isa(name, String) &amp;&amp; isa(score, Float64) &amp;&amp; isa(flags, Vector)
end</code></pre><p><strong>RPC client</strong></p><pre><code class="language-julia hljs">using Rembus

rb = connect()

rcp(rb, &quot;service_noargs&quot;)

rpc(rb, &quot;service_name&quot;, &quot;hello world&quot;)

rpc(rb, &quot;service_dictionary&quot;, Dict(&quot;r1&quot;=&gt;13.3, &quot;r2&quot;=&gt;3.0))

rpc(rb, &quot;service_multiple_args&quot;, [&quot;name&quot;, 1.0, [&quot;red&quot;=&gt;1,&quot;blue&quot;=&gt;2,&quot;yellow&quot;=&gt;3]])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L1917-L1958">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.save_configuration-Tuple{Rembus.Router}" href="#Rembus.save_configuration-Tuple{Rembus.Router}"><code>Rembus.save_configuration</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">save_configuration(router::Router)</code></pre><p>Persist router configuration on disk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/store.jl#L469-L473">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.save_owners-Tuple{Any}" href="#Rembus.save_owners-Tuple{Any}"><code>Rembus.save_owners</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">save_owners(owners_df)</code></pre><p>Save the owners table.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/store.jl#L52-L56">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.save_token_app-Tuple{Any}" href="#Rembus.save_token_app-Tuple{Any}"><code>Rembus.save_token_app</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">save_token_app(df)</code></pre><p>Save the owners table.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/store.jl#L78-L82">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.save_twins-Tuple{Any}" href="#Rembus.save_twins-Tuple{Any}"><code>Rembus.save_twins</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">save_twins(router)</code></pre><p>Persist twins to storage.</p><p>Save twins configuration only if twin has a name.</p><p>Persist undelivered messages if they are queued in memory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/store.jl#L272-L280">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.set_broker_context-Tuple{Any}" href="#Rembus.set_broker_context-Tuple{Any}"><code>Rembus.set_broker_context</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_broker_context(ctx)</code></pre><p>Set the object to be passed ad first argument to functions related to twin lifecycle.</p><p>Actually the functions that use <code>ctx</code> are:</p><ul><li><code>twin_initialize</code></li><li><code>twin_finalize</code></li><li><code>park</code></li><li><code>unpark</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/broker.jl#L1016-L1027">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.set_broker_plugin-Tuple{Module}" href="#Rembus.set_broker_plugin-Tuple{Module}"><code>Rembus.set_broker_plugin</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_broker_plugin(extension::Module)</code></pre><p>Inject the module that implements the functions related to twin lifecycle.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/broker.jl#L1007-L1011">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.shared-Tuple{Rembus.RBHandle, Any}" href="#Rembus.shared-Tuple{Rembus.RBHandle, Any}"><code>Rembus.shared</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">shared(rb::RBHandle, ctx)</code></pre><p>Bind a <code>ctx</code> context object to the <code>rb</code> component.</p><p>When a <code>ctx</code> context object is bound then it will be the first argument of subscribed and exposed methods.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L939-L946">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.subscribe" href="#Rembus.subscribe"><code>Rembus.subscribe</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">subscribe(rb::RBHandle, fn::Function, retroactive::Bool=false; exceptionerror=true)
subscribe(
    rb::RBHandle, topic::AbstractString, fn::Function, retroactive::Bool=false;
    exceptionerror=true
)</code></pre><p>Declare interest for messages published on <code>topic</code> logical channel.</p><p>The function <code>fn</code> is called when a message is received on <code>topic</code> and <a href="#Rembus.reactive-Tuple{Rembus.RBHandle}"><code>reactive</code></a> put the <code>rb</code> component in reactive mode.</p><p>If the <code>topic</code> argument is omitted the function name must be equal to the topic name.</p><p>If <code>retroactive</code> is <code>true</code> then <code>rb</code> component will receive messages published when it was offline.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L1757-L1773">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.unauthorize-Tuple{Any, Any, Any}" href="#Rembus.unauthorize-Tuple{Any, Any, Any}"><code>Rembus.unauthorize</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">unauthorize(router, twin, msg)</code></pre><p>Administration command to unauthorize a component to publish/subscribe to a private topic.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/admin.jl#L60-L64">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.unexpose-Tuple{Rembus.RBHandle, AbstractString}" href="#Rembus.unexpose-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.unexpose</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">unexpose(rb::RBHandle, fn::Function; exceptionerror=true)
unexpose(rb::RBHandle, topic::AbstractString; exceptionerror=true)</code></pre><p>Stop servicing RPC requests targeting <code>topic</code> or <code>fn</code> methods.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L1833-L1838">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.unreactive-Tuple{Rembus.RBHandle}" href="#Rembus.unreactive-Tuple{Rembus.RBHandle}"><code>Rembus.unreactive</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">unreactive(rb::RBHandle, timeout=5; exceptionerror=true)</code></pre><p>Stop the delivery of published message.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L1726-L1730">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.unregister-Tuple{Any, AbstractString}" href="#Rembus.unregister-Tuple{Any, AbstractString}"><code>Rembus.unregister</code></a> — <span class="docstring-category">Method</span></header><section><div><p>unregister(cid::AbstractString)</p><p>Unregister the client identified by <code>cid</code>.</p><p>The secret pin is not needed because only an already connected and authtenticated component may execute the unregister command.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/register.jl#L68-L75">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.unsubscribe-Tuple{Rembus.RBHandle, AbstractString}" href="#Rembus.unsubscribe-Tuple{Rembus.RBHandle, AbstractString}"><code>Rembus.unsubscribe</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">unsubscribe(rb::RBHandle, topic::AbstractString; exceptionerror=true)
unsubscribe(rb::RBHandle, fn::Function; exceptionerror=true)</code></pre><p>No more messages published on a <code>topic</code> logical channel or a topic name equals to the name of the subscribed function will be delivered to <code>rb</code> component.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L1792-L1798">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.zmq_load-Tuple{ZMQ.Socket}" href="#Rembus.zmq_load-Tuple{ZMQ.Socket}"><code>Rembus.zmq_load</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">zmq_load(socket::ZMQ.Socket)</code></pre><p>Get a Rembus message from a ZeroMQ multipart message.</p><p>The decoding is performed at the client side.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/transport.jl#L16-L22">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.zmq_message-Tuple{Rembus.Router}" href="#Rembus.zmq_message-Tuple{Rembus.Router}"><code>Rembus.zmq_message</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">zmq_message(router::Router)::ZMQPacket</code></pre><p>Receive a Multipart ZeroMQ message.</p><p>Return the packet identity, header and data values extracted from a ROUTER socket.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/transport.jl#L226-L232">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.zmq_message-Tuple{ZMQ.Socket}" href="#Rembus.zmq_message-Tuple{ZMQ.Socket}"><code>Rembus.zmq_message</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">zmq_message(socket::ZMQ.Socket)::ZMQDealerPacket</code></pre><p>Receive a Multipart ZeroMQ message.</p><p>Return the packet header and data values extracted from a DEALER socket.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/transport.jl#L180-L186">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@component-Tuple{Any}" href="#Rembus.@component-Tuple{Any}"><code>Rembus.@component</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@component &quot;url&quot;</code></pre><p>Set the name of the component and the protocol for connecting to the broker.</p><p><code>url</code> may be:</p><ul><li>&quot;myname&quot;: use <span>$</span>REMBUS_BASE_URL for connection parameters</li><li>&quot;tcp://host:port/myname&quot;: tcp connection</li><li>&quot;ws://host:port/myname&quot;: web socket connection</li><li>&quot;zmq://host:port/myname&quot;: ZeroMQ connection</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L359-L370">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@disable_ack" href="#Rembus.@disable_ack"><code>Rembus.@disable_ack</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@disable_ack</code></pre><p>Disable acknowledge receipt of published messages.</p><p>This feature assure that messages get delivered at least one to the subscribed component.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L891-L898">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@enable_ack" href="#Rembus.@enable_ack"><code>Rembus.@enable_ack</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@enable_ack</code></pre><p>Enable acknowledge receipt of published messages.</p><p>This feature assure that messages get delivered at least one time to the subscribed component.</p><p>For default the acknowledge is disabled.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L873-L882">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@expose-Tuple{Expr}" href="#Rembus.@expose-Tuple{Expr}"><code>Rembus.@expose</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@expose function fn(arg1,...)
    ...
end</code></pre><p>Expose the function expression.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L666-L672">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@expose-Tuple{Symbol}" href="#Rembus.@expose-Tuple{Symbol}"><code>Rembus.@expose</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@expose fn</code></pre><p>Expose all the methods of the function <code>fn</code>.</p><p><strong>Example</strong></p><p>Expose the function <code>mycalc</code> that implements a service that may accept two numbers or a string and number:</p><pre><code class="language-julia hljs">mycalc(x::Number, y::Number) = x+y
mycalc(x::String, y::Number) = length(x)*y

@expose mycalc</code></pre><p>Call <code>mycal</code> service using the correct types of arguments:</p><pre><code class="language-julia hljs"># ok
julia&gt; response = @rpc mycalc(1,2)
0x0000000000000003

# ok
julia&gt; response = @rpc mycalc(&quot;hello&quot;,2.0)
10.0</code></pre><p>If the RPC client call <code>mycalc</code> with the argument&#39;s type that do not respect the signatures of the exposed service then it throws <a href="#Rembus.RpcMethodException"><code>RpcMethodException</code></a></p><pre><code class="language-julia hljs">julia&gt; response = @rpc mycalc(&quot;hello&quot;,&quot;world&quot;)
ERROR: RpcMethodException(&quot;rembus&quot;, &quot;mycalc&quot;, &quot;MethodError: no method matching mycalc(::String, ::String) ...</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L620-L656">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@publish-Tuple{Any}" href="#Rembus.@publish-Tuple{Any}"><code>Rembus.@publish</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@publish topic(arg1,arg2,...)</code></pre><p>Publish a message to <code>topic</code> logic channel.</p><p>The function <code>topic(arg1,arg2,...)</code> will be called on each connected component subscribed to <code>topic</code>.</p><p><strong>Publisher</strong></p><pre><code class="language-julia hljs">@publish foo(&quot;gfr&quot;, 54.2)</code></pre><p><strong>Subscriber</strong></p><pre><code class="language-julia hljs">function foo(name, value)
    println(&quot;do something with $name=$value&quot;)
end

@subscribe foo
@reactive

supervise()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L478-L502">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@reactive" href="#Rembus.@reactive"><code>Rembus.@reactive</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@reactive</code></pre><p>The subscribed methods start to handle published messages.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L847-L851">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@rpc-Tuple{Any}" href="#Rembus.@rpc-Tuple{Any}"><code>Rembus.@rpc</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@rpc service(arg1,...)</code></pre><p>Call the remote <code>service</code> method and return its outcome.</p><p>The outcome may be the a return value or a <a href="#Rembus.RpcMethodException"><code>RpcMethodException</code></a> if the remote throws an exception.</p><p>The <code>service</code> method must match the signature of an exposed remote <code>service</code> method.</p><p>Components may subscribe to <code>service</code> for receiving the <code>service</code> request.</p><p><strong>Exposer</strong></p><pre><code class="language-julia hljs">function mymethod(x, y)
    return evaluate(x,y)
end

@expose mymethod
supervise()</code></pre><p><strong>RPC client</strong></p><pre><code class="language-julia hljs">response = @rpc mymethod(x,y)</code></pre><p><strong>Subscriber</strong></p><pre><code class="language-julia hljs">function service(x, y)
    ...
end

@subscribe service
@reactive

supervise()
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L532-L571">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@rpc_timeout-Tuple{Any}" href="#Rembus.@rpc_timeout-Tuple{Any}"><code>Rembus.@rpc_timeout</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@rpc_timeout value</code></pre><p>Set the rpc request timeout in seconds.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L391-L395">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@shared-Tuple{Any}" href="#Rembus.@shared-Tuple{Any}"><code>Rembus.@shared</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs"> @shared container</code></pre><p>Bind a <code>container</code> object that is passed as the first argument of the subscribed component functions.</p><p>The <code>container</code> is useful for mantaining a state.</p><pre><code class="language-julia hljs">using Rembus

# keep the number of processed messages
mutable struct Context
    msgcount::UInt
end

function topic(context::Context, arg1, arg2)
    context.msgcount += 1
    some_logic(arg1, arg2)
end

ctx = Context(0)
@subscribe topic
@shared ctx
@reactive</code></pre><p>Using <code>@shared</code> to set a <code>container</code> object means that if some component <code>publish topic(arg1,arg2)</code> then the method <code>foo(container,arg2,arg2)</code> will be called.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L419-L449">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@subscribe" href="#Rembus.@subscribe"><code>Rembus.@subscribe</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@subscribe function fn(args...)
    ...
end [mode]</code></pre><p>Subscribe the function expression.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L737-L743">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@subscribe" href="#Rembus.@subscribe"><code>Rembus.@subscribe</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@subscribe topic [mode]</code></pre><p>Setup a subscription to <code>topic</code> logic channel to handle messages from <a href="#Rembus.@publish-Tuple{Any}"><code>@publish</code></a> or <a href="#Rembus.@rpc-Tuple{Any}"><code>@rpc</code></a>.</p><p><code>mode</code> values`:</p><ul><li><code>from_now</code> (default): receive messages published from now.</li><li><code>before_now</code>: receive messages published when the component was offline.</li></ul><p>Messages starts to be delivered to <code>topic</code> when reactivity is enabled with <code>@reactive</code> macro.</p><p><strong>Subscriber</strong></p><pre><code class="language-julia hljs">function foo(arg1, arg2)
    ...
end

@subscribe foo
@reactive

supervise()</code></pre><p><strong>Publisher</strong></p><pre><code class="language-julia hljs">@publish foo(&quot;gfr&quot;, 54.2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L699-L728">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@terminate" href="#Rembus.@terminate"><code>Rembus.@terminate</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@terminate</code></pre><p>Close the connection and terminate the component.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L378-L382">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@unexpose-Tuple{Symbol}" href="#Rembus.@unexpose-Tuple{Symbol}"><code>Rembus.@unexpose</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@unexpose fn</code></pre><p>The methods of <code>fn</code> function is no more available to rpc clients.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L770-L774">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@unreactive" href="#Rembus.@unreactive"><code>Rembus.@unreactive</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@unreactive</code></pre><p>The subscribed methods stop to handle published messages.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L860-L864">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Rembus.@unsubscribe-Tuple{Symbol}" href="#Rembus.@unsubscribe-Tuple{Symbol}"><code>Rembus.@unsubscribe</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@unsubscribe mytopic</code></pre><p>The methods of <code>mytopic</code> function stop to handle messages published to topic <code>mytopic</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cardo-org/Rembus.jl/blob/fbaab1f7924747a17e12e00435d73dafbf425292/src/Rembus.jl#L793-L798">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="configuration/">Configuration »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Wednesday 17 April 2024 18:17">Wednesday 17 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
